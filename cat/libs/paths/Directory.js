const reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
const reHasRegExpChar = RegExp(reRegExpChar.source);
function escapeRegExp(string) {
  return string && reHasRegExpChar.test(string) ? string.replace(reRegExpChar, "\\$&") : string || "";
}
const root = "";
const invalidCharacters = ["/", "*", "?", "[", "]", "!", "\\", "~", "|", "#", '"', "'", " "];
const oneValidCharacter = `[^${escapeRegExp(invalidCharacters.join(""))}]`;
const directoryRegexString = `^(?<directory>(?:${oneValidCharacter}+\\/)*)`;
const basicDirectoryRegex = new RegExp(directoryRegexString + "$");
function isDirectoryPath(path) {
  return basicDirectoryRegex.test(path);
}
const relativeRegex = /(?:^|\/)\.{1,2}\//;
function isAbsolutePath(path) {
  return !relativeRegex.test(path);
}
function resolveDirectory(path, base = root) {
  if (path.startsWith("/")) {
    base = root;
    path = path.substring(1);
  }
  if (path && !path.endsWith("/"))
    path = path + "/";
  if (!isDirectoryPath(path))
    return null;
  return resolveValidatedDirectory(path, base);
}
function resolveValidatedDirectory(relative, absolute) {
  if (!relative)
    return absolute;
  const relativeArray = relative.split(/(?<=\/)/);
  const absoluteArray = absolute.split(/(?<=\/)/).filter(Boolean);
  while (relativeArray.length) {
    const nextDir = relativeArray.shift();
    switch (nextDir) {
      case "./":
        break;
      case "../":
        if (!absoluteArray.length)
          return null;
        absoluteArray.pop();
        break;
      default:
        absoluteArray.push(nextDir);
    }
  }
  return absoluteArray.join("");
}
function getFirstDirectoryInPath(path) {
  const firstSlashIndex = path.indexOf("/");
  if (firstSlashIndex === -1)
    return null;
  return path.substring(0, firstSlashIndex + 1);
}
if (!isDirectoryPath(root) || !isAbsolutePath(root))
  throw new Error("Root failed to validate");
export {
  directoryRegexString,
  getFirstDirectoryInPath,
  isAbsolutePath,
  isDirectoryPath,
  oneValidCharacter,
  resolveDirectory,
  resolveValidatedDirectory,
  root
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vc3JjL2xpYnMvcGF0aHMvRGlyZWN0b3J5LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgdHlwZSB7RmlsZVBhdGh9IGZyb20gXCIvbGlicy9wYXRocy9GaWxlUGF0aFwiO1xyXG5cclxuLyoqXHJcbiAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGBcclxuICogW3N5bnRheCBjaGFyYWN0ZXJzXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1wYXR0ZXJucykuXHJcbiAqL1xyXG5jb25zdCByZVJlZ0V4cENoYXIgPSAvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2c7XHJcbmNvbnN0IHJlSGFzUmVnRXhwQ2hhciA9IFJlZ0V4cChyZVJlZ0V4cENoYXIuc291cmNlKTtcclxuXHJcbi8qKlxyXG4gKiBFc2NhcGVzIHRoZSBgUmVnRXhwYCBzcGVjaWFsIGNoYXJhY3RlcnMgXCJeXCIsIFwiJFwiLCBcIlxcXCIsIFwiLlwiLCBcIipcIiwgXCIrXCIsXHJcbiAqIFwiP1wiLCBcIihcIiwgXCIpXCIsIFwiW1wiLCBcIl1cIiwgXCJ7XCIsIFwifVwiLCBhbmQgXCJ8XCIgaW4gYHN0cmluZ2AuXHJcbiAqXHJcbiAqIEBzaW5jZSAzLjAuMFxyXG4gKiBAY2F0ZWdvcnkgU3RyaW5nXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGVzY2FwZS5cclxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXHJcbiAqIEBzZWUgZXNjYXBlLCBlc2NhcGVSZWdFeHAsIHVuZXNjYXBlXHJcbiAqIEBleGFtcGxlXHJcbiAqXHJcbiAqIGVzY2FwZVJlZ0V4cCgnW2xvZGFzaF0oaHR0cHM6Ly9sb2Rhc2guY29tLyknKVxyXG4gKiAvLyA9PiAnXFxbbG9kYXNoXFxdXFwoaHR0cHM6Ly9sb2Rhc2hcXC5jb20vXFwpJ1xyXG4gKi9cclxuZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cmluZzogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gc3RyaW5nICYmIHJlSGFzUmVnRXhwQ2hhci50ZXN0KHN0cmluZylcclxuICAgICAgICA/IHN0cmluZy5yZXBsYWNlKHJlUmVnRXhwQ2hhciwgXCJcXFxcJCZcIilcclxuICAgICAgICA6IHN0cmluZyB8fCBcIlwiO1xyXG59XHJcblxyXG4vKiogVGhlIGRpcmVjdG9yeSBwYXJ0IG9mIGEgQmFzaWNGaWxlUGF0aC4gRXZlcnl0aGluZyB1cCB0byBhbmQgaW5jbHVkaW5nIHRoZSBsYXN0IC9cclxuICogZS5nLiBcImZpbGUuanNcIiA9PiBcIlwiLCBvciBcImRpci9maWxlLmpzXCIgPT4gXCJkaXIvXCIsIG9yIFwiLi4vdGVzdC5qc1wiID0+IFwiLi4vXCIgKi9cclxuZXhwb3J0IHR5cGUgQmFzaWNEaXJlY3RvcnkgPSBzdHJpbmcgJiB7IF9fdHlwZTogXCJEaXJlY3RvcnlcIjsgfTtcclxuXHJcbi8qKiBUeXBlIGZvciB1c2UgaW4gRGlyZWN0b3J5IGFuZCBGaWxlUGF0aCB0byBpbmRpY2F0ZSBwYXRoIGlzIGFic29sdXRlICovXHJcbmV4cG9ydCB0eXBlIEFic29sdXRlUGF0aCA9IHN0cmluZyAmIHsgX19hYnNvbHV0ZVBhdGg6IHRydWU7IH07XHJcblxyXG4vKiogQSBkaXJlY3RvcnkgcGF0aCB0aGF0IGlzIGFsc28gYWJzb2x1dGUuIEFic29sdXRlIFJ1bGVzIChGaWxlUGF0aCBhbmQgRGlyZWN0b3J5UGF0aCk6XHJcbiAqIDEuIFNwZWNpZmljIGRpcmVjdG9yeSBuYW1lcyBcIi5cIiBhbmQgXCIuLlwiIGFyZSBkaXNhbGxvd2VkICovXHJcbmV4cG9ydCB0eXBlIERpcmVjdG9yeSA9IEJhc2ljRGlyZWN0b3J5ICYgQWJzb2x1dGVQYXRoO1xyXG5leHBvcnQgY29uc3Qgcm9vdCA9IFwiXCIgYXMgRGlyZWN0b3J5O1xyXG5cclxuLyoqIEludmFsaWQgY2hhcmFjdGVycyBpbiBhY3R1YWwgZmlsZXBhdGhzIGFuZCBkaXJlY3RvcnkgbmFtZXM6XHJcbiAqIC86IEludmFsaWQgYmVjYXVzZSBpdCBpcyB0aGUgZGlyZWN0b3J5IHNlcGFyYXRvci4gSXQncyBhbGxvd2VkIGluIHRoZSBkaXJlY3RvcnkgcGFydCwgYnV0IG9ubHkgYXMgdGhlIHNlcGFyYXRvci5cclxuICogKiwgPywgWywgYW5kIF06IEludmFsaWQgaW4gYWN0dWFsIHBhdGhzIGJlY2F1c2UgdGhleSBhcmUgdXNlZCBmb3IgZ2xvYmJpbmcuXHJcbiAqICE6IEludmFsaWQgYmVjYXVzZSBpdCBjb25mbGljdHMgd2l0aCB0ZXJtaW5hbCBoaXN0b3J5IGZldGNoaW5nXHJcbiAqIFxcOiBJbnZhbGlkIHRvIGF2b2lkIGNvbmZ1c2lvbiB3aXRoIGFuIGVzY2FwZSBjaGFyYWN0ZXJcclxuICogfjogSW52YWxpZCBiZWNhdXNlIGl0IG1pZ2h0IGhhdmUgYSB1c2UgaW4gdGhlIHRlcm1pbmFsIGluIHRoZSBmdXR1cmUuXHJcbiAqIHw6IEludmFsaWQgYmVjYXVzZSBpdCBtaWdodCBoYXZlIGEgdXNlIGluIHRoZSB0ZXJtaW5hbCBpbiB0aGUgZnV0dXJlLlxyXG4gKiAjOiBJbnZhbGlkIGJlY2F1c2UgaXQgbWlnaHQgaGF2ZSBhIHVzZSBpbiB0aGUgdGVybWluYWwgaW4gdGhlIGZ1dHVyZS5cclxuICogKHF1b3RlIG1hcmtzKTogSW52YWxpZCB0byBhdm9pZCBjb25mbGljdCB3aXRoIHF1b3RlIG1hcmtzIHVzZWQgaW4gdGhlIHRlcm1pbmFsLlxyXG4gKiAoc3BhY2UpOiBJbnZhbGlkIHRvIGF2b2lkIGNvbmZ1c2lvbiB3aXRoIHRlcm1pbmFsIGNvbW1hbmQgc2VwYXJhdG9yICovXHJcbmNvbnN0IGludmFsaWRDaGFyYWN0ZXJzID0gW1wiL1wiLCBcIipcIiwgXCI/XCIsIFwiW1wiLCBcIl1cIiwgXCIhXCIsIFwiXFxcXFwiLCBcIn5cIiwgXCJ8XCIsIFwiI1wiLCBcIlxcXCJcIiwgXCInXCIsIFwiIFwiXTtcclxuXHJcbi8qKiBBIHZhbGlkIGNoYXJhY3RlciBpcyBhbnkgY2hhcmFjdGVyIHRoYXQgaXMgbm90IG9uZSBvZiB0aGUgaW52YWxpZCBjaGFyYWN0ZXJzICovXHJcbmV4cG9ydCBjb25zdCBvbmVWYWxpZENoYXJhY3RlciA9IGBbXiR7ZXNjYXBlUmVnRXhwKGludmFsaWRDaGFyYWN0ZXJzLmpvaW4oXCJcIikpfV1gO1xyXG5cclxuLyoqIFJlZ2V4IHN0cmluZyBmb3IgbWF0Y2hpbmcgdGhlIGRpcmVjdG9yeSBwYXJ0IG9mIGEgdmFsaWQgZmlsZXBhdGggKi9cclxuZXhwb3J0IGNvbnN0IGRpcmVjdG9yeVJlZ2V4U3RyaW5nID0gYF4oPzxkaXJlY3Rvcnk+KD86JHtvbmVWYWxpZENoYXJhY3Rlcn0rXFxcXC8pKilgO1xyXG5cclxuLyoqIEFjdHVhbCBSZWdFeHAgZm9yIHZhbGlkYXRpbmcgdGhhdCBhbiBlbnRpcmUgc3RyaW5nIGlzIGEgQmFzaWNEaXJlY3RvcnkgKi9cclxuY29uc3QgYmFzaWNEaXJlY3RvcnlSZWdleCA9IG5ldyBSZWdFeHAoZGlyZWN0b3J5UmVnZXhTdHJpbmcgKyBcIiRcIik7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNEaXJlY3RvcnlQYXRoKHBhdGg6IHN0cmluZyk6IHBhdGggaXMgQmFzaWNEaXJlY3Rvcnkge1xyXG4gICAgcmV0dXJuIGJhc2ljRGlyZWN0b3J5UmVnZXgudGVzdChwYXRoKTtcclxufVxyXG5cclxuLyoqIFJlZ2V4IHRvIGNoZWNrIGlmIHJlbGF0aXZlIHBhcnRzIGFyZSBpbmNsdWRlZCAoZGlyZWN0b3J5IG5hbWVzIFwiLi5cIiBhbmQgXCIuXCIpICovXHJcbmNvbnN0IHJlbGF0aXZlUmVnZXggPSAvKD86XnxcXC8pXFwuezEsMn1cXC8vO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQWJzb2x1dGVQYXRoKHBhdGg6IHN0cmluZyk6IHBhdGggaXMgQWJzb2x1dGVQYXRoIHtcclxuICAgIHJldHVybiAhcmVsYXRpdmVSZWdleC50ZXN0KHBhdGgpO1xyXG59XHJcblxyXG4vKiogU2FuaXRpemUgYW5kIHJlc29sdmUgYSBwbGF5ZXItcHJvdmlkZWQgcG90ZW50aWFsbHktcmVsYXRpdmUgcGF0aCB0byBhbiBhYnNvbHV0ZSBwYXRoLlxyXG4gKiBAcGFyYW0gcGF0aCBUaGUgcGxheWVyLXByb3ZpZGVkIGRpcmVjdG9yeSBwYXRoLCBlLmcuIDJuZCBhcmd1bWVudCBmb3IgdGVybWluYWwgY3AgY29tbWFuZFxyXG4gKiBAcGFyYW0gYmFzZSBUaGUgc3RhcnRpbmcgZGlyZWN0b3J5LiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZURpcmVjdG9yeShwYXRoOiBzdHJpbmcsIGJhc2UgPSByb290KTogRGlyZWN0b3J5IHwgbnVsbCB7XHJcbiAgICAvLyBBbHdheXMgdXNlIGFic29sdXRlIHBhdGggaWYgcGxheWVyLXByb3ZpZGVkIHBhdGggc3RhcnRzIHdpdGggL1xyXG4gICAgaWYgKHBhdGguc3RhcnRzV2l0aChcIi9cIikpIHtcclxuICAgICAgICBiYXNlID0gcm9vdDtcclxuICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHJpbmcoMSk7XHJcbiAgICB9XHJcbiAgICAvLyBBZGQgYSB0cmFpbGluZyAvIGlmIGl0IGlzIG5vdCBwcmVzZW50XHJcbiAgICBpZiAocGF0aCAmJiAhcGF0aC5lbmRzV2l0aChcIi9cIikpIHBhdGggPSBwYXRoICsgXCIvXCI7XHJcbiAgICBpZiAoIWlzRGlyZWN0b3J5UGF0aChwYXRoKSkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gcmVzb2x2ZVZhbGlkYXRlZERpcmVjdG9yeShwYXRoLCBiYXNlKTtcclxufVxyXG5cclxuLyoqIFJlc29sdmUgYW4gYWxyZWFkeS10eXBlY2hlY2tlZCBkaXJlY3RvcnkgcGF0aCB3aXRoIHJlc3BlY3QgdG8gYW4gYWJzb2x1dGUgcGF0aCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVZhbGlkYXRlZERpcmVjdG9yeShyZWxhdGl2ZTogQmFzaWNEaXJlY3RvcnksIGFic29sdXRlOiBEaXJlY3RvcnkpOiBEaXJlY3RvcnkgfCBudWxsIHtcclxuICAgIGlmICghcmVsYXRpdmUpIHJldHVybiBhYnNvbHV0ZTtcclxuICAgIGNvbnN0IHJlbGF0aXZlQXJyYXkgPSByZWxhdGl2ZS5zcGxpdCgvKD88PVxcLykvKTtcclxuICAgIGNvbnN0IGFic29sdXRlQXJyYXkgPSBhYnNvbHV0ZS5zcGxpdCgvKD88PVxcLykvKS5maWx0ZXIoQm9vbGVhbik7XHJcbiAgICB3aGlsZSAocmVsYXRpdmVBcnJheS5sZW5ndGgpIHtcclxuICAgICAgICAvLyBXZSBqdXN0IGNoZWNrZWQgbGVuZ3RoIHNvIHdlIGtub3cgdGhpcyBpcyBhIHN0cmluZ1xyXG4gICAgICAgIGNvbnN0IG5leHREaXIgPSByZWxhdGl2ZUFycmF5LnNoaWZ0KCkgYXMgc3RyaW5nO1xyXG4gICAgICAgIHN3aXRjaCAobmV4dERpcikge1xyXG4gICAgICAgICAgICBjYXNlIFwiLi9cIjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiLi4vXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAoIWFic29sdXRlQXJyYXkubGVuZ3RoKSByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIGFic29sdXRlQXJyYXkucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGFic29sdXRlQXJyYXkucHVzaChuZXh0RGlyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYWJzb2x1dGVBcnJheS5qb2luKFwiXCIpIGFzIERpcmVjdG9yeTtcclxufVxyXG5cclxuLyoqIFJldHVybnMgdGhlIGZpcnN0IGRpcmVjdG9yeSwgb3RoZXIgdGhhbiByb290LCBpbiBhIGZpbGUgcGF0aC4gSWYgaW4gcm9vdCwgcmV0dXJucyBudWxsLiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rmlyc3REaXJlY3RvcnlJblBhdGgocGF0aDogRmlsZVBhdGggfCBEaXJlY3RvcnkpOiBEaXJlY3RvcnkgfCBudWxsIHtcclxuICAgIGNvbnN0IGZpcnN0U2xhc2hJbmRleCA9IHBhdGguaW5kZXhPZihcIi9cIik7XHJcbiAgICBpZiAoZmlyc3RTbGFzaEluZGV4ID09PSAtMSkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gcGF0aC5zdWJzdHJpbmcoMCwgZmlyc3RTbGFzaEluZGV4ICsgMSkgYXMgRGlyZWN0b3J5O1xyXG59XHJcblxyXG4vLyBUaGlzIGlzIHRvIHZhbGlkYXRlIHRoZSBhc3NlcnRpb24gZWFybGllciB0aGF0IHJvb3QgaXMgaW4gZmFjdCBhIERpcmVjdG9yeVxyXG5pZiAoIWlzRGlyZWN0b3J5UGF0aChyb290KSB8fCAhaXNBYnNvbHV0ZVBhdGgocm9vdCkpIHRocm93IG5ldyBFcnJvcihcIlJvb3QgZmFpbGVkIHRvIHZhbGlkYXRlXCIpO1xyXG4iXSwKICAibWFwcGluZ3MiOiAiQUFNQSxNQUFNLGVBQWU7QUFDckIsTUFBTSxrQkFBa0IsT0FBTyxhQUFhLE1BQU07QUFnQmxELFNBQVMsYUFBYSxRQUFnQjtBQUNsQyxTQUFPLFVBQVUsZ0JBQWdCLEtBQUssTUFBTSxJQUN0QyxPQUFPLFFBQVEsY0FBYyxNQUFNLElBQ25DLFVBQVU7QUFDcEI7QUFZTyxNQUFNLE9BQU87QUFZcEIsTUFBTSxvQkFBb0IsQ0FBQyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxNQUFNLEtBQUssS0FBSyxLQUFLLEtBQU0sS0FBSyxHQUFHO0FBR3JGLE1BQU0sb0JBQW9CLEtBQUssYUFBYSxrQkFBa0IsS0FBSyxFQUFFLENBQUMsQ0FBQztBQUd2RSxNQUFNLHVCQUF1QixvQkFBb0IsaUJBQWlCO0FBR3pFLE1BQU0sc0JBQXNCLElBQUksT0FBTyx1QkFBdUIsR0FBRztBQUUxRCxTQUFTLGdCQUFnQixNQUFzQztBQUNsRSxTQUFPLG9CQUFvQixLQUFLLElBQUk7QUFDeEM7QUFHQSxNQUFNLGdCQUFnQjtBQUVmLFNBQVMsZUFBZSxNQUFvQztBQUMvRCxTQUFPLENBQUMsY0FBYyxLQUFLLElBQUk7QUFDbkM7QUFLTyxTQUFTLGlCQUFpQixNQUFjLE9BQU8sTUFBd0I7QUFFMUUsTUFBSSxLQUFLLFdBQVcsR0FBRyxHQUFHO0FBQ3RCLFdBQU87QUFDUCxXQUFPLEtBQUssVUFBVSxDQUFDO0FBQUEsRUFDM0I7QUFFQSxNQUFJLFFBQVEsQ0FBQyxLQUFLLFNBQVMsR0FBRztBQUFHLFdBQU8sT0FBTztBQUMvQyxNQUFJLENBQUMsZ0JBQWdCLElBQUk7QUFBRyxXQUFPO0FBQ25DLFNBQU8sMEJBQTBCLE1BQU0sSUFBSTtBQUMvQztBQUdPLFNBQVMsMEJBQTBCLFVBQTBCLFVBQXVDO0FBQ3ZHLE1BQUksQ0FBQztBQUFVLFdBQU87QUFDdEIsUUFBTSxnQkFBZ0IsU0FBUyxNQUFNLFNBQVM7QUFDOUMsUUFBTSxnQkFBZ0IsU0FBUyxNQUFNLFNBQVMsRUFBRSxPQUFPLE9BQU87QUFDOUQsU0FBTyxjQUFjLFFBQVE7QUFFekIsVUFBTSxVQUFVLGNBQWMsTUFBTTtBQUNwQyxZQUFRLFNBQVM7QUFBQSxNQUNiLEtBQUs7QUFDRDtBQUFBLE1BQ0osS0FBSztBQUNELFlBQUksQ0FBQyxjQUFjO0FBQVEsaUJBQU87QUFDbEMsc0JBQWMsSUFBSTtBQUNsQjtBQUFBLE1BQ0o7QUFDSSxzQkFBYyxLQUFLLE9BQU87QUFBQSxJQUNsQztBQUFBLEVBQ0o7QUFDQSxTQUFPLGNBQWMsS0FBSyxFQUFFO0FBQ2hDO0FBR08sU0FBUyx3QkFBd0IsTUFBOEM7QUFDbEYsUUFBTSxrQkFBa0IsS0FBSyxRQUFRLEdBQUc7QUFDeEMsTUFBSSxvQkFBb0I7QUFBSSxXQUFPO0FBQ25DLFNBQU8sS0FBSyxVQUFVLEdBQUcsa0JBQWtCLENBQUM7QUFDaEQ7QUFHQSxJQUFJLENBQUMsZ0JBQWdCLElBQUksS0FBSyxDQUFDLGVBQWUsSUFBSTtBQUFHLFFBQU0sSUFBSSxNQUFNLHlCQUF5QjsiLAogICJuYW1lcyI6IFtdCn0K
