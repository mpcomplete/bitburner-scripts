import { cities } from "src/cat/corporationUtils";
import { EmployeePosition, MaterialName, UpgradeName } from "src/cat/corporationFormulas";
import { getRecordEntries } from "src/cat/libs/Record";
import { CorpUpgradesData } from "src/cat/data/CorpUpgradesData";
import { CorpMaterialsData } from "./data/CorpMaterialsData";
const indexDBObjectStore = "savestring";
async function getObjectStore() {
  return new Promise((resolve, reject) => {
    const request = window.indexedDB.open("bitburnerSave", 1);
    request.onerror = () => {
      console.error("Error occurred when interacting with IndexDB. Result:", request.result);
      reject("Error occurred when interacting with IndexDB");
    };
    request.onsuccess = function() {
      const db = this.result;
      const objectStore = db.transaction([indexDBObjectStore], "readwrite").objectStore(indexDBObjectStore);
      resolve(objectStore);
    };
  });
}
async function getAllSaveDataKeys() {
  return new Promise((resolve) => {
    getObjectStore().then((objectStore) => {
      const requestGetAllKeys = objectStore.getAllKeys();
      requestGetAllKeys.onsuccess = () => resolve(requestGetAllKeys.result);
    });
  });
}
async function getSaveData(key) {
  return new Promise((resolve) => {
    getObjectStore().then((objectStore) => {
      const requestGet = objectStore.get(key);
      requestGet.onsuccess = () => resolve(requestGet.result);
    });
  });
}
async function insertSaveData(saveData) {
  return new Promise((resolve) => {
    getObjectStore().then((objectStore) => {
      const requestPut = objectStore.put(saveData, (/* @__PURE__ */ new Date()).toISOString());
      requestPut.onsuccess = () => resolve();
    });
  });
}
async function updateSaveData(key, saveData) {
  return new Promise((resolve) => {
    getObjectStore().then((objectStore) => {
      const requestPut = objectStore.put(saveData, key);
      requestPut.onsuccess = () => resolve();
    });
  });
}
async function deleteSaveData(key) {
  return new Promise((resolve) => {
    getObjectStore().then((objectStore) => {
      const requestDelete = objectStore.delete(key);
      requestDelete.onsuccess = () => resolve();
    });
  });
}
function isTestingToolsAvailable() {
  return globalThis.Player !== void 0;
}
function setUnlimitedBonusTime() {
  if (!isTestingToolsAvailable()) {
    return;
  }
  Player.corporation.storedCycles = 1e9;
}
function removeBonusTime() {
  if (!isTestingToolsAvailable()) {
    return;
  }
  Player.corporation.storedCycles = 0;
}
function setFunds(funds) {
  if (!isTestingToolsAvailable()) {
    return;
  }
  Player.corporation.funds = funds;
}
function setUpgradeLevel(upgradeName, level) {
  if (!isTestingToolsAvailable()) {
    return;
  }
  const corpUpgrades = getRecordEntries(Player.corporation.upgrades);
  for (const [corpUpgradeName, corpUpgradeInfo] of corpUpgrades) {
    if (corpUpgradeName === upgradeName) {
      const upgradeData = CorpUpgradesData[corpUpgradeName];
      corpUpgradeInfo.level = level;
      corpUpgradeInfo.value = 1 + upgradeData.benefit * level;
    }
    if (corpUpgradeName === UpgradeName.SMART_STORAGE) {
      for (const division of Player.corporation.divisions.values()) {
        const warehouses = Object.values(division.warehouses);
        for (const warehouse of warehouses) {
          warehouse.updateSize(Player.corporation, division);
        }
      }
    }
  }
}
function setResearchPoints(divisionName, researchPoints) {
  if (!isTestingToolsAvailable()) {
    return;
  }
  Player.corporation.divisions.get(divisionName).researchPoints = researchPoints;
}
function setOfficeSetup(divisionName, employeeJobs) {
  if (!isTestingToolsAvailable()) {
    return;
  }
  const size = employeeJobs.reduce((accumulator, current) => accumulator += current, 0);
  const offices = Object.values(Player.corporation.divisions.get(divisionName).offices);
  for (const office of offices) {
    office.size = size;
    office.numEmployees = size;
    office.employeeNextJobs[EmployeePosition.OPERATIONS] = employeeJobs[0];
    office.employeeNextJobs[EmployeePosition.ENGINEER] = employeeJobs[1];
    office.employeeNextJobs[EmployeePosition.BUSINESS] = employeeJobs[2];
    office.employeeNextJobs[EmployeePosition.MANAGEMENT] = employeeJobs[3];
    office.employeeNextJobs[EmployeePosition.RESEARCH_DEVELOPMENT] = employeeJobs[4];
    office.employeeNextJobs[EmployeePosition.INTERN] = 0;
    office.employeeNextJobs[EmployeePosition.UNASSIGNED] = 0;
  }
}
function setWarehouseLevel(divisionName, level) {
  if (!isTestingToolsAvailable()) {
    return;
  }
  const division = Player.corporation.divisions.get(divisionName);
  const warehouses = Object.values(division.warehouses);
  for (const warehouse of warehouses) {
    warehouse.level = level;
    warehouse.updateSize(Player.corporation, division);
  }
}
function setBoostMaterials(divisionName, boostMaterials) {
  if (!isTestingToolsAvailable()) {
    return;
  }
  const warehouses = Object.values(Player.corporation.divisions.get(divisionName).warehouses);
  for (const warehouse of warehouses) {
    const materials = Object.values(warehouse.materials);
    for (const material of materials) {
      switch (material.name) {
        case MaterialName.AI_CORES:
          material.stored = boostMaterials[0];
          break;
        case MaterialName.HARDWARE:
          material.stored = boostMaterials[1];
          break;
        case MaterialName.REAL_ESTATE:
          material.stored = boostMaterials[2];
          break;
        case MaterialName.ROBOTS:
          material.stored = boostMaterials[3];
          break;
      }
    }
  }
}
function clearMaterials(divisionName, options) {
  if (!isTestingToolsAvailable()) {
    return;
  }
  const division = Player.corporation.divisions.get(divisionName);
  const requiredMaterials = Object.keys(division.requiredMaterials);
  const producedMaterials = division.producedMaterials;
  const warehouses = Object.values(division.warehouses);
  for (const warehouse of warehouses) {
    const materials = Object.values(warehouse.materials);
    for (const material of materials) {
      if (options.input && requiredMaterials.includes(material.name) || options.output && producedMaterials.includes(material.name)) {
        material.stored = 0;
      }
    }
  }
}
function setEnergyAndMorale(divisionName, energy, morale) {
  if (!isTestingToolsAvailable()) {
    return;
  }
  for (const city of cities) {
    Player.corporation.divisions.get(divisionName).offices[city].avgEnergy = energy;
    Player.corporation.divisions.get(divisionName).offices[city].avgMorale = morale;
  }
}
function addResearch(divisionName, researchName) {
  if (!isTestingToolsAvailable()) {
    return;
  }
  Player.corporation.divisions.get(divisionName).researched.add(researchName);
}
function resetRNGData() {
  if (!isTestingToolsAvailable()) {
    return;
  }
  for (const [_, division] of Player.corporation.divisions) {
    for (const [_2, office] of Object.entries(division.offices)) {
      office.avgIntelligence = 75;
      office.avgCharisma = 75;
      office.avgCreativity = 75;
      office.avgEfficiency = 75;
    }
    for (const [_2, warehouse] of Object.entries(division.warehouses)) {
      for (const [_3, material] of Object.entries(warehouse.materials)) {
        material.demand = CorpMaterialsData[material.name].demandBase;
        material.competition = CorpMaterialsData[material.name].competitionBase;
        material.marketPrice = CorpMaterialsData[material.name].baseCost;
        material.averagePrice = CorpMaterialsData[material.name].baseCost;
      }
    }
  }
}
export {
  addResearch,
  clearMaterials,
  deleteSaveData,
  getAllSaveDataKeys,
  getObjectStore,
  getSaveData,
  insertSaveData,
  isTestingToolsAvailable,
  removeBonusTime,
  resetRNGData,
  setBoostMaterials,
  setEnergyAndMorale,
  setFunds,
  setOfficeSetup,
  setResearchPoints,
  setUnlimitedBonusTime,
  setUpgradeLevel,
  setWarehouseLevel,
  updateSaveData
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2NvcnBvcmF0aW9uVGVzdGluZ1Rvb2xzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBjaXRpZXMgfSBmcm9tIFwiL2NvcnBvcmF0aW9uVXRpbHNcIjtcclxuaW1wb3J0IHsgQ2l0eU5hbWUsIEVtcGxveWVlUG9zaXRpb24sIE1hdGVyaWFsTmFtZSwgUmVzZWFyY2hOYW1lLCBVcGdyYWRlTmFtZSB9IGZyb20gXCIvY29ycG9yYXRpb25Gb3JtdWxhc1wiO1xyXG5pbXBvcnQgeyBnZXRSZWNvcmRFbnRyaWVzLCBQYXJ0aWFsUmVjb3JkIH0gZnJvbSBcIi9saWJzL1JlY29yZFwiO1xyXG5pbXBvcnQgeyBDb3JwVXBncmFkZXNEYXRhIH0gZnJvbSBcIi9kYXRhL0NvcnBVcGdyYWRlc0RhdGFcIjtcclxuaW1wb3J0IHsgQ29ycE1hdGVyaWFsc0RhdGEgfSBmcm9tIFwiLi9kYXRhL0NvcnBNYXRlcmlhbHNEYXRhXCI7XHJcblxyXG50eXBlIFNhdmVEYXRhID0gc3RyaW5nIHwgVWludDhBcnJheTtcclxuXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12YXJcclxuICAgIHZhciBQbGF5ZXI6IHtcclxuICAgICAgICBtb25leTogbnVtYmVyO1xyXG4gICAgICAgIGNvcnBvcmF0aW9uOiBDb3Jwb3JhdGlvbiB8IG51bGw7XHJcbiAgICB9O1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZhclxyXG4gICAgdmFyIEVuZ2luZToge1xyXG4gICAgICAgIHVwZGF0ZUdhbWU6IChudW1DeWNsZXM/OiBudW1iZXIpID0+IHZvaWQ7XHJcbiAgICAgICAgbG9hZDogKHNhdmVEYXRhOiBTYXZlRGF0YSkgPT4gUHJvbWlzZTx2b2lkPjtcclxuICAgICAgICBzdGFydDogKCkgPT4gdm9pZDtcclxuICAgIH07XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdmFyXHJcbiAgICB2YXIgU2F2ZU9iamVjdDoge1xyXG4gICAgICAgIHNhdmVPYmplY3Q6IHtcclxuICAgICAgICAgICAgZ2V0U2F2ZURhdGE6IChmb3JjZUV4Y2x1ZGVSdW5uaW5nU2NyaXB0czogYm9vbGVhbiwgZm9yY2VFeGNsdWRlU2NyaXB0czogYm9vbGVhbikgPT4gUHJvbWlzZTxTYXZlRGF0YT47XHJcbiAgICAgICAgfTtcclxuICAgICAgICBsb2FkR2FtZTogKHNhdmVEYXRhOiBTYXZlRGF0YSkgPT4gUHJvbWlzZTxib29sZWFuPjtcclxuICAgIH07XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdmFyXHJcbiAgICB2YXIgQWxsU2VydmVyczoge1xyXG4gICAgICAgIGxvYWRBbGxTZXJ2ZXJzOiAoc2F2ZVN0cmluZzogc3RyaW5nKSA9PiB2b2lkO1xyXG4gICAgICAgIHNhdmVBbGxTZXJ2ZXJzOiAoKSA9PiBzdHJpbmc7XHJcbiAgICB9O1xyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZhclxyXG4gICAgdmFyIGNvcnBvcmF0aW9uQ3ljbGVIaXN0b3J5OiBDeWNsZURhdGFbXTtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12YXJcclxuICAgIHZhciBiYWNrdXBDb3Jwb3JhdGlvbkRhdGE6IENvcnBvcmF0aW9uIHwgbnVsbDtcclxufVxyXG5cclxuaW50ZXJmYWNlIEN5Y2xlRGF0YSB7XHJcbiAgICBjeWNsZTogbnVtYmVyO1xyXG4gICAgZGl2aXNpb25zOiBDb3Jwb3JhdGlvbltcImRpdmlzaW9uc1wiXTtcclxuICAgIGZ1bmRzOiBDb3Jwb3JhdGlvbltcImZ1bmRzXCJdO1xyXG4gICAgcmV2ZW51ZTogQ29ycG9yYXRpb25bXCJyZXZlbnVlXCJdO1xyXG4gICAgZXhwZW5zZXM6IENvcnBvcmF0aW9uW1wiZXhwZW5zZXNcIl07XHJcbiAgICBmdW5kaW5nUm91bmQ6IENvcnBvcmF0aW9uW1wiZnVuZGluZ1JvdW5kXCJdO1xyXG4gICAgdXBncmFkZXM6IENvcnBvcmF0aW9uW1widXBncmFkZXNcIl07XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgT2ZmaWNlIHtcclxuICAgIHNpemU6IG51bWJlcjtcclxuICAgIGF2Z0VuZXJneTogbnVtYmVyO1xyXG4gICAgYXZnTW9yYWxlOiBudW1iZXI7XHJcbiAgICBhdmdJbnRlbGxpZ2VuY2U6IG51bWJlcjtcclxuICAgIGF2Z0NoYXJpc21hOiBudW1iZXI7XHJcbiAgICBhdmdDcmVhdGl2aXR5OiBudW1iZXI7XHJcbiAgICBhdmdFZmZpY2llbmN5OiBudW1iZXI7XHJcbiAgICBudW1FbXBsb3llZXM6IG51bWJlcjtcclxuICAgIGVtcGxveWVlTmV4dEpvYnM6IHtcclxuICAgICAgICBPcGVyYXRpb25zOiBudW1iZXIsXHJcbiAgICAgICAgRW5naW5lZXI6IG51bWJlcixcclxuICAgICAgICBCdXNpbmVzczogbnVtYmVyLFxyXG4gICAgICAgIE1hbmFnZW1lbnQ6IG51bWJlcixcclxuICAgICAgICBcIlJlc2VhcmNoICYgRGV2ZWxvcG1lbnRcIjogbnVtYmVyLFxyXG4gICAgICAgIEludGVybjogbnVtYmVyLFxyXG4gICAgICAgIFVuYXNzaWduZWQ6IG51bWJlcixcclxuICAgICAgICB0b3RhbDogbnVtYmVyO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBNYXRlcmlhbCB7XHJcbiAgICBuYW1lOiBNYXRlcmlhbE5hbWU7XHJcbiAgICBzdG9yZWQ6IG51bWJlcjtcclxuICAgIGRlbWFuZDogbnVtYmVyO1xyXG4gICAgY29tcGV0aXRpb246IG51bWJlcjtcclxuICAgIG1hcmtldFByaWNlOiBudW1iZXI7XHJcbiAgICBhdmVyYWdlUHJpY2U6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBXYXJlaG91c2Uge1xyXG4gICAgbWF0ZXJpYWxzOiBSZWNvcmQ8TWF0ZXJpYWxOYW1lLCBNYXRlcmlhbD47XHJcbiAgICBsZXZlbDogbnVtYmVyO1xyXG4gICAgdXBkYXRlU2l6ZTogKGNvcnBvcmF0aW9uOiBDb3Jwb3JhdGlvbiwgZGl2aXNpb246IERpdmlzaW9uKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIERpdmlzaW9uIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHJlc2VhcmNoUG9pbnRzOiBudW1iZXI7XHJcbiAgICByZXNlYXJjaGVkOiBTZXQ8UmVzZWFyY2hOYW1lPjtcclxuICAgIHJlcXVpcmVkTWF0ZXJpYWxzOiBQYXJ0aWFsUmVjb3JkPE1hdGVyaWFsTmFtZSwgbnVtYmVyPjtcclxuICAgIHByb2R1Y2VkTWF0ZXJpYWxzOiBNYXRlcmlhbE5hbWVbXTtcclxuICAgIG9mZmljZXM6IFBhcnRpYWxSZWNvcmQ8Q2l0eU5hbWUsIE9mZmljZT47XHJcbiAgICB3YXJlaG91c2VzOiBQYXJ0aWFsUmVjb3JkPENpdHlOYW1lLCBXYXJlaG91c2U+O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvcnBvcmF0aW9uIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgYW55PiB7XHJcbiAgICBmdW5kczogbnVtYmVyO1xyXG4gICAgcmV2ZW51ZTogbnVtYmVyO1xyXG4gICAgZXhwZW5zZXM6IG51bWJlcjtcclxuICAgIGZ1bmRpbmdSb3VuZDogbnVtYmVyO1xyXG4gICAgc3RvcmVkQ3ljbGVzOiBudW1iZXI7XHJcbiAgICBkaXZpc2lvbnM6IE1hcDxzdHJpbmcsIERpdmlzaW9uPjtcclxuICAgIHVwZ3JhZGVzOiBSZWNvcmQ8VXBncmFkZU5hbWUsIHsgbGV2ZWw6IG51bWJlciwgdmFsdWU6IG51bWJlcjsgfT47XHJcbiAgICB2YWx1YXRpb246IG51bWJlcjtcclxuICAgIGN5Y2xlQ291bnQ6IG51bWJlcjtcclxufVxyXG5cclxuY29uc3QgaW5kZXhEQk9iamVjdFN0b3JlID0gXCJzYXZlc3RyaW5nXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T2JqZWN0U3RvcmUoKTogUHJvbWlzZTxJREJPYmplY3RTdG9yZT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gd2luZG93LmluZGV4ZWREQi5vcGVuKFwiYml0YnVybmVyU2F2ZVwiLCAxKTtcclxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvY2N1cnJlZCB3aGVuIGludGVyYWN0aW5nIHdpdGggSW5kZXhEQi4gUmVzdWx0OlwiLCByZXF1ZXN0LnJlc3VsdCk7XHJcbiAgICAgICAgICAgIHJlamVjdChcIkVycm9yIG9jY3VycmVkIHdoZW4gaW50ZXJhY3Rpbmcgd2l0aCBJbmRleERCXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAodGhpczogSURCUmVxdWVzdDxJREJEYXRhYmFzZT4pIHtcclxuICAgICAgICAgICAgY29uc3QgZGIgPSB0aGlzLnJlc3VsdDtcclxuICAgICAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSBkYi50cmFuc2FjdGlvbihbaW5kZXhEQk9iamVjdFN0b3JlXSwgXCJyZWFkd3JpdGVcIikub2JqZWN0U3RvcmUoaW5kZXhEQk9iamVjdFN0b3JlKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShvYmplY3RTdG9yZSk7XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsU2F2ZURhdGFLZXlzKCk6IFByb21pc2U8SURCVmFsaWRLZXlbXT4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgZ2V0T2JqZWN0U3RvcmUoKS50aGVuKG9iamVjdFN0b3JlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEdldEFsbEtleXMgPSBvYmplY3RTdG9yZS5nZXRBbGxLZXlzKCk7XHJcbiAgICAgICAgICAgIHJlcXVlc3RHZXRBbGxLZXlzLm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUocmVxdWVzdEdldEFsbEtleXMucmVzdWx0KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2F2ZURhdGEoa2V5OiBzdHJpbmcpOiBQcm9taXNlPFNhdmVEYXRhPiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICBnZXRPYmplY3RTdG9yZSgpLnRoZW4ob2JqZWN0U3RvcmUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0R2V0ID0gb2JqZWN0U3RvcmUuZ2V0KGtleSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3RHZXQub25zdWNjZXNzID0gKCkgPT4gcmVzb2x2ZShyZXF1ZXN0R2V0LnJlc3VsdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluc2VydFNhdmVEYXRhKHNhdmVEYXRhOiBTYXZlRGF0YSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgZ2V0T2JqZWN0U3RvcmUoKS50aGVuKG9iamVjdFN0b3JlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdFB1dCA9IG9iamVjdFN0b3JlLnB1dChzYXZlRGF0YSwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpKTtcclxuICAgICAgICAgICAgcmVxdWVzdFB1dC5vbnN1Y2Nlc3MgPSAoKSA9PiByZXNvbHZlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVNhdmVEYXRhKGtleTogc3RyaW5nLCBzYXZlRGF0YTogU2F2ZURhdGEpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIGdldE9iamVjdFN0b3JlKCkudGhlbihvYmplY3RTdG9yZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RQdXQgPSBvYmplY3RTdG9yZS5wdXQoc2F2ZURhdGEsIGtleSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3RQdXQub25zdWNjZXNzID0gKCkgPT4gcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVTYXZlRGF0YShrZXk6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgZ2V0T2JqZWN0U3RvcmUoKS50aGVuKG9iamVjdFN0b3JlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdERlbGV0ZSA9IG9iamVjdFN0b3JlLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICByZXF1ZXN0RGVsZXRlLm9uc3VjY2VzcyA9ICgpID0+IHJlc29sdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNUZXN0aW5nVG9vbHNBdmFpbGFibGUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gZ2xvYmFsVGhpcy5QbGF5ZXIgIT09IHVuZGVmaW5lZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFVubGltaXRlZEJvbnVzVGltZSgpOiB2b2lkIHtcclxuICAgIGlmICghaXNUZXN0aW5nVG9vbHNBdmFpbGFibGUoKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIFBsYXllci5jb3Jwb3JhdGlvbiEuc3RvcmVkQ3ljbGVzID0gMWU5O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQm9udXNUaW1lKCk6IHZvaWQge1xyXG4gICAgaWYgKCFpc1Rlc3RpbmdUb29sc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgUGxheWVyLmNvcnBvcmF0aW9uIS5zdG9yZWRDeWNsZXMgPSAwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0RnVuZHMoZnVuZHM6IG51bWJlcik6IHZvaWQge1xyXG4gICAgaWYgKCFpc1Rlc3RpbmdUb29sc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgUGxheWVyLmNvcnBvcmF0aW9uIS5mdW5kcyA9IGZ1bmRzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0VXBncmFkZUxldmVsKHVwZ3JhZGVOYW1lOiBVcGdyYWRlTmFtZSwgbGV2ZWw6IG51bWJlcik6IHZvaWQge1xyXG4gICAgaWYgKCFpc1Rlc3RpbmdUb29sc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29ycFVwZ3JhZGVzID0gZ2V0UmVjb3JkRW50cmllcyhQbGF5ZXIuY29ycG9yYXRpb24hLnVwZ3JhZGVzKTtcclxuICAgIGZvciAoY29uc3QgW2NvcnBVcGdyYWRlTmFtZSwgY29ycFVwZ3JhZGVJbmZvXSBvZiBjb3JwVXBncmFkZXMpIHtcclxuICAgICAgICBpZiAoY29ycFVwZ3JhZGVOYW1lID09PSB1cGdyYWRlTmFtZSkge1xyXG4gICAgICAgICAgICBjb25zdCB1cGdyYWRlRGF0YSA9IENvcnBVcGdyYWRlc0RhdGFbY29ycFVwZ3JhZGVOYW1lXTtcclxuICAgICAgICAgICAgY29ycFVwZ3JhZGVJbmZvLmxldmVsID0gbGV2ZWw7XHJcbiAgICAgICAgICAgIGNvcnBVcGdyYWRlSW5mby52YWx1ZSA9IDEgKyB1cGdyYWRlRGF0YS5iZW5lZml0ICogbGV2ZWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29ycFVwZ3JhZGVOYW1lID09PSBVcGdyYWRlTmFtZS5TTUFSVF9TVE9SQUdFKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZGl2aXNpb24gb2YgUGxheWVyLmNvcnBvcmF0aW9uIS5kaXZpc2lvbnMudmFsdWVzKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHdhcmVob3VzZXMgPSBPYmplY3QudmFsdWVzKGRpdmlzaW9uLndhcmVob3VzZXMpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB3YXJlaG91c2Ugb2Ygd2FyZWhvdXNlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHdhcmVob3VzZS51cGRhdGVTaXplKFBsYXllci5jb3Jwb3JhdGlvbiEsIGRpdmlzaW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFJlc2VhcmNoUG9pbnRzKGRpdmlzaW9uTmFtZTogc3RyaW5nLCByZXNlYXJjaFBvaW50czogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBpZiAoIWlzVGVzdGluZ1Rvb2xzQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBQbGF5ZXIuY29ycG9yYXRpb24hLmRpdmlzaW9ucy5nZXQoZGl2aXNpb25OYW1lKSEucmVzZWFyY2hQb2ludHMgPSByZXNlYXJjaFBvaW50cztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE9mZmljZVNldHVwKGRpdmlzaW9uTmFtZTogc3RyaW5nLCBlbXBsb3llZUpvYnM6IG51bWJlcltdKTogdm9pZCB7XHJcbiAgICBpZiAoIWlzVGVzdGluZ1Rvb2xzQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBzaXplID0gZW1wbG95ZWVKb2JzLnJlZHVjZSgoYWNjdW11bGF0b3IsIGN1cnJlbnQpID0+IGFjY3VtdWxhdG9yICs9IGN1cnJlbnQsIDApO1xyXG4gICAgY29uc3Qgb2ZmaWNlcyA9IE9iamVjdC52YWx1ZXMoUGxheWVyLmNvcnBvcmF0aW9uIS5kaXZpc2lvbnMuZ2V0KGRpdmlzaW9uTmFtZSkhLm9mZmljZXMpO1xyXG4gICAgZm9yIChjb25zdCBvZmZpY2Ugb2Ygb2ZmaWNlcykge1xyXG4gICAgICAgIG9mZmljZS5zaXplID0gc2l6ZTtcclxuICAgICAgICBvZmZpY2UubnVtRW1wbG95ZWVzID0gc2l6ZTtcclxuICAgICAgICBvZmZpY2UuZW1wbG95ZWVOZXh0Sm9ic1tFbXBsb3llZVBvc2l0aW9uLk9QRVJBVElPTlNdID0gZW1wbG95ZWVKb2JzWzBdO1xyXG4gICAgICAgIG9mZmljZS5lbXBsb3llZU5leHRKb2JzW0VtcGxveWVlUG9zaXRpb24uRU5HSU5FRVJdID0gZW1wbG95ZWVKb2JzWzFdO1xyXG4gICAgICAgIG9mZmljZS5lbXBsb3llZU5leHRKb2JzW0VtcGxveWVlUG9zaXRpb24uQlVTSU5FU1NdID0gZW1wbG95ZWVKb2JzWzJdO1xyXG4gICAgICAgIG9mZmljZS5lbXBsb3llZU5leHRKb2JzW0VtcGxveWVlUG9zaXRpb24uTUFOQUdFTUVOVF0gPSBlbXBsb3llZUpvYnNbM107XHJcbiAgICAgICAgb2ZmaWNlLmVtcGxveWVlTmV4dEpvYnNbRW1wbG95ZWVQb3NpdGlvbi5SRVNFQVJDSF9ERVZFTE9QTUVOVF0gPSBlbXBsb3llZUpvYnNbNF07XHJcbiAgICAgICAgb2ZmaWNlLmVtcGxveWVlTmV4dEpvYnNbRW1wbG95ZWVQb3NpdGlvbi5JTlRFUk5dID0gMDtcclxuICAgICAgICBvZmZpY2UuZW1wbG95ZWVOZXh0Sm9ic1tFbXBsb3llZVBvc2l0aW9uLlVOQVNTSUdORURdID0gMDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFdhcmVob3VzZUxldmVsKGRpdmlzaW9uTmFtZTogc3RyaW5nLCBsZXZlbDogbnVtYmVyKTogdm9pZCB7XHJcbiAgICBpZiAoIWlzVGVzdGluZ1Rvb2xzQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkaXZpc2lvbiA9IFBsYXllci5jb3Jwb3JhdGlvbiEuZGl2aXNpb25zLmdldChkaXZpc2lvbk5hbWUpITtcclxuICAgIGNvbnN0IHdhcmVob3VzZXMgPSBPYmplY3QudmFsdWVzKGRpdmlzaW9uLndhcmVob3VzZXMpO1xyXG4gICAgZm9yIChjb25zdCB3YXJlaG91c2Ugb2Ygd2FyZWhvdXNlcykge1xyXG4gICAgICAgIHdhcmVob3VzZS5sZXZlbCA9IGxldmVsO1xyXG4gICAgICAgIHdhcmVob3VzZS51cGRhdGVTaXplKFBsYXllci5jb3Jwb3JhdGlvbiEsIGRpdmlzaW9uKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldEJvb3N0TWF0ZXJpYWxzKGRpdmlzaW9uTmFtZTogc3RyaW5nLCBib29zdE1hdGVyaWFsczogbnVtYmVyW10pOiB2b2lkIHtcclxuICAgIGlmICghaXNUZXN0aW5nVG9vbHNBdmFpbGFibGUoKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHdhcmVob3VzZXMgPSBPYmplY3QudmFsdWVzKFBsYXllci5jb3Jwb3JhdGlvbiEuZGl2aXNpb25zLmdldChkaXZpc2lvbk5hbWUpIS53YXJlaG91c2VzKTtcclxuICAgIGZvciAoY29uc3Qgd2FyZWhvdXNlIG9mIHdhcmVob3VzZXMpIHtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbHMgPSBPYmplY3QudmFsdWVzKHdhcmVob3VzZS5tYXRlcmlhbHMpO1xyXG4gICAgICAgIGZvciAoY29uc3QgbWF0ZXJpYWwgb2YgbWF0ZXJpYWxzKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobWF0ZXJpYWwubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBNYXRlcmlhbE5hbWUuQUlfQ09SRVM6XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc3RvcmVkID0gYm9vc3RNYXRlcmlhbHNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE1hdGVyaWFsTmFtZS5IQVJEV0FSRTpcclxuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zdG9yZWQgPSBib29zdE1hdGVyaWFsc1sxXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgTWF0ZXJpYWxOYW1lLlJFQUxfRVNUQVRFOlxyXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnN0b3JlZCA9IGJvb3N0TWF0ZXJpYWxzWzJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBNYXRlcmlhbE5hbWUuUk9CT1RTOlxyXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnN0b3JlZCA9IGJvb3N0TWF0ZXJpYWxzWzNdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJNYXRlcmlhbHMoXHJcbiAgICBkaXZpc2lvbk5hbWU6IHN0cmluZyxcclxuICAgIG9wdGlvbnM6IHtcclxuICAgICAgICBpbnB1dDogYm9vbGVhbjtcclxuICAgICAgICBvdXRwdXQ6IGJvb2xlYW47XHJcbiAgICB9XHJcbik6IHZvaWQge1xyXG4gICAgaWYgKCFpc1Rlc3RpbmdUb29sc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGl2aXNpb24gPSBQbGF5ZXIuY29ycG9yYXRpb24hLmRpdmlzaW9ucy5nZXQoZGl2aXNpb25OYW1lKSE7XHJcbiAgICBjb25zdCByZXF1aXJlZE1hdGVyaWFscyA9IE9iamVjdC5rZXlzKGRpdmlzaW9uLnJlcXVpcmVkTWF0ZXJpYWxzKTtcclxuICAgIGNvbnN0IHByb2R1Y2VkTWF0ZXJpYWxzID0gZGl2aXNpb24ucHJvZHVjZWRNYXRlcmlhbHM7XHJcbiAgICBjb25zdCB3YXJlaG91c2VzID0gT2JqZWN0LnZhbHVlcyhkaXZpc2lvbi53YXJlaG91c2VzKTtcclxuICAgIGZvciAoY29uc3Qgd2FyZWhvdXNlIG9mIHdhcmVob3VzZXMpIHtcclxuICAgICAgICBjb25zdCBtYXRlcmlhbHMgPSBPYmplY3QudmFsdWVzKHdhcmVob3VzZS5tYXRlcmlhbHMpO1xyXG4gICAgICAgIGZvciAoY29uc3QgbWF0ZXJpYWwgb2YgbWF0ZXJpYWxzKSB7XHJcbiAgICAgICAgICAgIGlmICgob3B0aW9ucy5pbnB1dCAmJiByZXF1aXJlZE1hdGVyaWFscy5pbmNsdWRlcyhtYXRlcmlhbC5uYW1lKSlcclxuICAgICAgICAgICAgICAgIHx8IChvcHRpb25zLm91dHB1dCAmJiBwcm9kdWNlZE1hdGVyaWFscy5pbmNsdWRlcyhtYXRlcmlhbC5uYW1lKSkpIHtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnN0b3JlZCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRFbmVyZ3lBbmRNb3JhbGUoZGl2aXNpb25OYW1lOiBzdHJpbmcsIGVuZXJneTogbnVtYmVyLCBtb3JhbGU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgaWYgKCFpc1Rlc3RpbmdUb29sc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBjaXR5IG9mIGNpdGllcykge1xyXG4gICAgICAgIFBsYXllci5jb3Jwb3JhdGlvbiEuZGl2aXNpb25zLmdldChkaXZpc2lvbk5hbWUpIS5vZmZpY2VzW2NpdHldIS5hdmdFbmVyZ3kgPSBlbmVyZ3k7XHJcbiAgICAgICAgUGxheWVyLmNvcnBvcmF0aW9uIS5kaXZpc2lvbnMuZ2V0KGRpdmlzaW9uTmFtZSkhLm9mZmljZXNbY2l0eV0hLmF2Z01vcmFsZSA9IG1vcmFsZTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZFJlc2VhcmNoKGRpdmlzaW9uTmFtZTogc3RyaW5nLCByZXNlYXJjaE5hbWU6IFJlc2VhcmNoTmFtZSk6IHZvaWQge1xyXG4gICAgaWYgKCFpc1Rlc3RpbmdUb29sc0F2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgUGxheWVyLmNvcnBvcmF0aW9uIS5kaXZpc2lvbnMuZ2V0KGRpdmlzaW9uTmFtZSkhLnJlc2VhcmNoZWQuYWRkKHJlc2VhcmNoTmFtZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXNldFJOR0RhdGEoKSB7XHJcbiAgICBpZiAoIWlzVGVzdGluZ1Rvb2xzQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IFtfLCBkaXZpc2lvbl0gb2YgUGxheWVyLmNvcnBvcmF0aW9uIS5kaXZpc2lvbnMpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IFtfLCBvZmZpY2VdIG9mIE9iamVjdC5lbnRyaWVzKGRpdmlzaW9uLm9mZmljZXMpKSB7XHJcbiAgICAgICAgICAgIG9mZmljZS5hdmdJbnRlbGxpZ2VuY2UgPSA3NTtcclxuICAgICAgICAgICAgb2ZmaWNlLmF2Z0NoYXJpc21hID0gNzU7XHJcbiAgICAgICAgICAgIG9mZmljZS5hdmdDcmVhdGl2aXR5ID0gNzU7XHJcbiAgICAgICAgICAgIG9mZmljZS5hdmdFZmZpY2llbmN5ID0gNzU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3QgW18sIHdhcmVob3VzZV0gb2YgT2JqZWN0LmVudHJpZXMoZGl2aXNpb24ud2FyZWhvdXNlcykpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBbXywgbWF0ZXJpYWxdIG9mIE9iamVjdC5lbnRyaWVzKHdhcmVob3VzZS5tYXRlcmlhbHMpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5kZW1hbmQgPSBDb3JwTWF0ZXJpYWxzRGF0YVttYXRlcmlhbC5uYW1lXS5kZW1hbmRCYXNlO1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuY29tcGV0aXRpb24gPSBDb3JwTWF0ZXJpYWxzRGF0YVttYXRlcmlhbC5uYW1lXS5jb21wZXRpdGlvbkJhc2U7XHJcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5tYXJrZXRQcmljZSA9IENvcnBNYXRlcmlhbHNEYXRhW21hdGVyaWFsLm5hbWVdLmJhc2VDb3N0O1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuYXZlcmFnZVByaWNlID0gQ29ycE1hdGVyaWFsc0RhdGFbbWF0ZXJpYWwubmFtZV0uYmFzZUNvc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIkFBQUEsU0FBUyxjQUFjO0FBQ3ZCLFNBQW1CLGtCQUFrQixjQUE0QixtQkFBbUI7QUFDcEYsU0FBUyx3QkFBdUM7QUFDaEQsU0FBUyx3QkFBd0I7QUFDakMsU0FBUyx5QkFBeUI7QUFzR2xDLE1BQU0scUJBQXFCO0FBRTNCLGVBQXNCLGlCQUEwQztBQUM1RCxTQUFPLElBQUksUUFBUSxDQUFDLFNBQVMsV0FBVztBQUNwQyxVQUFNLFVBQVUsT0FBTyxVQUFVLEtBQUssaUJBQWlCLENBQUM7QUFDeEQsWUFBUSxVQUFVLE1BQU07QUFDcEIsY0FBUSxNQUFNLHlEQUF5RCxRQUFRLE1BQU07QUFDckYsYUFBTyw4Q0FBOEM7QUFBQSxJQUN6RDtBQUNBLFlBQVEsWUFBWSxXQUF5QztBQUN6RCxZQUFNLEtBQUssS0FBSztBQUNoQixZQUFNLGNBQWMsR0FBRyxZQUFZLENBQUMsa0JBQWtCLEdBQUcsV0FBVyxFQUFFLFlBQVksa0JBQWtCO0FBQ3BHLGNBQVEsV0FBVztBQUFBLElBQ3ZCO0FBQUEsRUFDSixDQUFDO0FBQ0w7QUFFQSxlQUFzQixxQkFBNkM7QUFDL0QsU0FBTyxJQUFJLFFBQVEsQ0FBQyxZQUFZO0FBQzVCLG1CQUFlLEVBQUUsS0FBSyxpQkFBZTtBQUNqQyxZQUFNLG9CQUFvQixZQUFZLFdBQVc7QUFDakQsd0JBQWtCLFlB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
